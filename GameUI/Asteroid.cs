using HyperbolicRenderer;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Graphics;
using SharpDX.Direct2D1.Effects;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace GameUI
{
    public class Asteroid : Sprite
    {
        double speed;
        public Vector direction;
        double rotation;
        double rotationspeed;
        public bool disappear;
        public Collider collider;
        public int shapedrawidx = 0;

        static Vector2[] colliderpoints = new Vector2[548] { new Vector2(75, 3), new Vector2(76, 4), new Vector2(77, 4), new Vector2(78, 4), new Vector2(79, 4), new Vector2(80, 4), new Vector2(81, 4), new Vector2(82, 4), new Vector2(83, 5), new Vector2(84, 5), new Vector2(85, 6), new Vector2(86, 6), new Vector2(87, 7), new Vector2(88, 8), new Vector2(89, 9), new Vector2(90, 10), new Vector2(91, 11), new Vector2(92, 12), new Vector2(93, 13), new Vector2(94, 14), new Vector2(94, 15), new Vector2(95, 16), new Vector2(96, 17), new Vector2(97, 18), new Vector2(97, 19), new Vector2(98, 20), new Vector2(99, 21), new Vector2(100, 21), new Vector2(101, 21), new Vector2(102, 22), new Vector2(103, 22), new Vector2(104, 23), new Vector2(105, 23), new Vector2(106, 24), new Vector2(107, 24), new Vector2(108, 25), new Vector2(109, 26), new Vector2(110, 26), new Vector2(111, 27), new Vector2(112, 28), new Vector2(113, 29), new Vector2(114, 30), new Vector2(115, 31), new Vector2(116, 31), new Vector2(117, 31), new Vector2(118, 31), new Vector2(119, 32), new Vector2(120, 32), new Vector2(121, 32), new Vector2(122, 33), new Vector2(123, 33), new Vector2(124, 34), new Vector2(125, 35), new Vector2(126, 36), new Vector2(127, 37), new Vector2(128, 38), new Vector2(129, 39), new Vector2(129, 40), new Vector2(130, 41), new Vector2(131, 42), new Vector2(132, 42), new Vector2(133, 43), new Vector2(134, 44), new Vector2(135, 45), new Vector2(136, 45), new Vector2(137, 46), new Vector2(138, 47), new Vector2(139, 48), new Vector2(140, 49), new Vector2(141, 50), new Vector2(141, 51), new Vector2(141, 52), new Vector2(142, 53), new Vector2(142, 54), new Vector2(143, 55), new Vector2(143, 56), new Vector2(143, 57), new Vector2(143, 58), new Vector2(144, 59), new Vector2(144, 60), new Vector2(144, 61), new Vector2(144, 62), new Vector2(144, 63), new Vector2(144, 64), new Vector2(145, 65), new Vector2(145, 66), new Vector2(145, 67), new Vector2(145, 68), new Vector2(146, 69), new Vector2(146, 70), new Vector2(146, 71), new Vector2(147, 72), new Vector2(148, 73), new Vector2(148, 74), new Vector2(149, 75), new Vector2(150, 76), new Vector2(151, 77), new Vector2(152, 78), new Vector2(153, 79), new Vector2(154, 80), new Vector2(155, 81), new Vector2(156, 82), new Vector2(157, 83), new Vector2(158, 84), new Vector2(159, 85), new Vector2(160, 86), new Vector2(160, 87), new Vector2(160, 88), new Vector2(161, 89), new Vector2(161, 90), new Vector2(161, 91), new Vector2(161, 92), new Vector2(161, 93), new Vector2(161, 94), new Vector2(161, 95), new Vector2(161, 96), new Vector2(161, 97), new Vector2(161, 98), new Vector2(161, 99), new Vector2(160, 100), new Vector2(160, 101), new Vector2(159, 102), new Vector2(159, 103), new Vector2(158, 104), new Vector2(157, 105), new Vector2(156, 106), new Vector2(155, 107), new Vector2(155, 108), new Vector2(155, 109), new Vector2(155, 110), new Vector2(155, 111), new Vector2(155, 112), new Vector2(155, 113), new Vector2(154, 114), new Vector2(154, 115), new Vector2(154, 116), new Vector2(155, 117), new Vector2(155, 118), new Vector2(155, 119), new Vector2(155, 120), new Vector2(156, 121), new Vector2(157, 122), new Vector2(158, 123), new Vector2(159, 123), new Vector2(160, 124), new Vector2(161, 125), new Vector2(162, 125), new Vector2(163, 126), new Vector2(164, 127), new Vector2(165, 128), new Vector2(165, 129), new Vector2(165, 130), new Vector2(165, 131), new Vector2(164, 132), new Vector2(163, 133), new Vector2(163, 134), new Vector2(162, 135), new Vector2(161, 136), new Vector2(160, 137), new Vector2(159, 138), new Vector2(158, 139), new Vector2(157, 140), new Vector2(156, 141), new Vector2(155, 142), new Vector2(155, 141), new Vector2(154, 142), new Vector2(153, 143), new Vector2(152, 144), new Vector2(152, 143), new Vector2(151, 144), new Vector2(150, 145), new Vector2(150, 144), new Vector2(149, 145), new Vector2(148, 146), new Vector2(148, 145), new Vector2(147, 146), new Vector2(146, 146), new Vector2(145, 147), new Vector2(145, 146), new Vector2(144, 147), new Vector2(143, 147), new Vector2(142, 148), new Vector2(142, 147), new Vector2(141, 148), new Vector2(141, 147), new Vector2(140, 148), new Vector2(139, 148), new Vector2(138, 148), new Vector2(137, 149), new Vector2(137, 148), new Vector2(136, 149), new Vector2(136, 148), new Vector2(135, 149), new Vector2(134, 149), new Vector2(133, 149), new Vector2(132, 149), new Vector2(131, 149), new Vector2(130, 149), new Vector2(129, 149), new Vector2(128, 149), new Vector2(127, 149), new Vector2(126, 149), new Vector2(125, 149), new Vector2(124, 149), new Vector2(123, 149), new Vector2(122, 149), new Vector2(121, 149), new Vector2(120, 149), new Vector2(119, 149), new Vector2(118, 149), new Vector2(117, 149), new Vector2(116, 149), new Vector2(115, 149), new Vector2(114, 148), new Vector2(114, 149), new Vector2(113, 148), new Vector2(113, 149), new Vector2(112, 148), new Vector2(111, 148), new Vector2(110, 148), new Vector2(109, 148), new Vector2(108, 147), new Vector2(108, 148), new Vector2(107, 147), new Vector2(107, 148), new Vector2(106, 147), new Vector2(105, 147), new Vector2(104, 147), new Vector2(103, 147), new Vector2(102, 146), new Vector2(102, 147), new Vector2(101, 146), new Vector2(100, 146), new Vector2(99, 146), new Vector2(98, 145), new Vector2(98, 146), new Vector2(97, 145), new Vector2(96, 145), new Vector2(95, 145), new Vector2(94, 144), new Vector2(94, 145), new Vector2(93, 144), new Vector2(92, 144), new Vector2(91, 143), new Vector2(91, 144), new Vector2(90, 143), new Vector2(89, 143), new Vector2(88, 142), new Vector2(88, 143), new Vector2(87, 142), new Vector2(86, 142), new Vector2(85, 142), new Vector2(84, 141), new Vector2(83, 141), new Vector2(82, 140), new Vector2(82, 141), new Vector2(81, 140), new Vector2(80, 140), new Vector2(79, 139), new Vector2(79, 140), new Vector2(78, 139), new Vector2(77, 138), new Vector2(77, 139), new Vector2(76, 138), new Vector2(75, 137), new Vector2(75, 138), new Vector2(74, 137), new Vector2(73, 136), new Vector2(73, 137), new Vector2(72, 136), new Vector2(71, 135), new Vector2(71, 136), new Vector2(70, 135), new Vector2(69, 134), new Vector2(69, 135), new Vector2(68, 134), new Vector2(67, 133), new Vector2(67, 134), new Vector2(66, 133), new Vector2(65, 132), new Vector2(64, 131), new Vector2(64, 132), new Vector2(63, 131), new Vector2(62, 130), new Vector2(62, 131), new Vector2(61, 130), new Vector2(60, 129), new Vector2(60, 130), new Vector2(59, 129), new Vector2(59, 128), new Vector2(58, 128), new Vector2(57, 127), new Vector2(57, 128), new Vector2(56, 127), new Vector2(56, 126), new Vector2(55, 126), new Vector2(54, 125), new Vector2(53, 124), new Vector2(53, 125), new Vector2(52, 124), new Vector2(52, 123), new Vector2(51, 123), new Vector2(50, 122), new Vector2(50, 123), new Vector2(49, 122), new Vector2(49, 121), new Vector2(48, 120), new Vector2(48, 121), new Vector2(47, 120), new Vector2(46, 119), new Vector2(45, 118), new Vector2(44, 117), new Vector2(44, 118), new Vector2(43, 117), new Vector2(43, 116), new Vector2(42, 115), new Vector2(42, 116), new Vector2(41, 115), new Vector2(41, 114), new Vector2(40, 113), new Vector2(40, 114), new Vector2(39, 113), new Vector2(39, 112), new Vector2(38, 111), new Vector2(38, 112), new Vector2(37, 111), new Vector2(37, 110), new Vector2(36, 109), new Vector2(36, 110), new Vector2(35, 109), new Vector2(35, 108), new Vector2(34, 107), new Vector2(34, 108), new Vector2(33, 107), new Vector2(33, 106), new Vector2(32, 105), new Vector2(32, 106), new Vector2(32, 104), new Vector2(31, 103), new Vector2(31, 104), new Vector2(30, 103), new Vector2(30, 102), new Vector2(29, 101), new Vector2(29, 102), new Vector2(29, 100), new Vector2(28, 99), new Vector2(28, 100), new Vector2(28, 98), new Vector2(27, 97), new Vector2(27, 98), new Vector2(27, 96), new Vector2(26, 95), new Vector2(26, 96), new Vector2(26, 94), new Vector2(26, 93), new Vector2(25, 92), new Vector2(25, 93), new Vector2(24, 92), new Vector2(24, 91), new Vector2(23, 91), new Vector2(22, 90), new Vector2(22, 91), new Vector2(21, 90), new Vector2(21, 89), new Vector2(20, 89), new Vector2(19, 88), new Vector2(18, 87), new Vector2(17, 86), new Vector2(16, 85), new Vector2(16, 86), new Vector2(14, 84), new Vector2(15, 84), new Vector2(14, 83), new Vector2(14, 82), new Vector2(13, 81), new Vector2(13, 82), new Vector2(12, 81), new Vector2(12, 80), new Vector2(12, 79), new Vector2(11, 78), new Vector2(11, 79), new Vector2(10, 78), new Vector2(10, 77), new Vector2(10, 76), new Vector2(9, 75), new Vector2(9, 76), new Vector2(9, 74), new Vector2(8, 73), new Vector2(8, 74), new Vector2(8, 72), new Vector2(7, 71), new Vector2(7, 72), new Vector2(7, 70), new Vector2(7, 69), new Vector2(7, 68), new Vector2(6, 69), new Vector2(6, 68), new Vector2(6, 67), new Vector2(6, 66), new Vector2(6, 65), new Vector2(6, 64), new Vector2(6, 63), new Vector2(5, 64), new Vector2(5, 63), new Vector2(5, 62), new Vector2(6, 62), new Vector2(6, 61), new Vector2(6, 60), new Vector2(5, 61), new Vector2(5, 60), new Vector2(5, 59), new Vector2(6, 59), new Vector2(6, 58), new Vector2(6, 57), new Vector2(5, 58), new Vector2(6, 56), new Vector2(6, 55), new Vector2(6, 54), new Vector2(5, 53), new Vector2(5, 54), new Vector2(5, 52), new Vector2(5, 51), new Vector2(4, 52), new Vector2(4, 51), new Vector2(4, 50), new Vector2(4, 49), new Vector2(4, 48), new Vector2(4, 47), new Vector2(4, 46), new Vector2(4, 45), new Vector2(4, 44), new Vector2(4, 43), new Vector2(4, 42), new Vector2(4, 41), new Vector2(5, 41), new Vector2(5, 40), new Vector2(4, 39), new Vector2(4, 40), new Vector2(3, 39), new Vector2(3, 38), new Vector2(2, 37), new Vector2(2, 38), new Vector2(2, 36), new Vector2(1, 35), new Vector2(1, 36), new Vector2(1, 34), new Vector2(1, 33), new Vector2(0, 34), new Vector2(0, 33), new Vector2(0, 32), new Vector2(0, 31), new Vector2(0, 30), new Vector2(0, 29), new Vector2(0, 28), new Vector2(0, 27), new Vector2(0, 26), new Vector2(0, 25), new Vector2(0, 24), new Vector2(0, 23), new Vector2(1, 23), new Vector2(1, 22), new Vector2(1, 21), new Vector2(1, 20), new Vector2(2, 20), new Vector2(2, 19), new Vector2(2, 18), new Vector2(3, 18), new Vector2(3, 17), new Vector2(4, 16), new Vector2(4, 15), new Vector2(5, 15), new Vector2(5, 14), new Vector2(6, 13), new Vector2(6, 12), new Vector2(7, 12), new Vector2(7, 11), new Vector2(8, 11), new Vector2(8, 10), new Vector2(9, 10), new Vector2(9, 9), new Vector2(10, 8), new Vector2(11, 7), new Vector2(11, 6), new Vector2(12, 6), new Vector2(12, 5), new Vector2(13, 5), new Vector2(13, 4), new Vector2(14, 4), new Vector2(14, 3), new Vector2(15, 3), new Vector2(15, 2), new Vector2(16, 2), new Vector2(17, 1), new Vector2(18, 1), new Vector2(19, 1), new Vector2(20, 1), new Vector2(21, 1), new Vector2(22, 1), new Vector2(23, 1), new Vector2(24, 2), new Vector2(25, 2), new Vector2(26, 3), new Vector2(27, 3), new Vector2(28, 3), new Vector2(29, 4), new Vector2(30, 4), new Vector2(31, 5), new Vector2(32, 6), new Vector2(33, 6), new Vector2(34, 7), new Vector2(35, 7), new Vector2(36, 8), new Vector2(37, 8), new Vector2(38, 9), new Vector2(39, 9), new Vector2(40, 9), new Vector2(41, 9), new Vector2(42, 9), new Vector2(43, 9), new Vector2(44, 9), new Vector2(45, 9), new Vector2(46, 10), new Vector2(47, 10), new Vector2(47, 9), new Vector2(48, 9), new Vector2(49, 9), new Vector2(49, 8), new Vector2(50, 8), new Vector2(51, 8), new Vector2(52, 7), new Vector2(53, 7), new Vector2(53, 6), new Vector2(54, 6), new Vector2(55, 6), new Vector2(55, 5), new Vector2(56, 5), new Vector2(57, 5), new Vector2(58, 5), new Vector2(58, 4), new Vector2(59, 4), new Vector2(60, 4), new Vector2(61, 4), new Vector2(61, 3), new Vector2(62, 3), new Vector2(63, 3), new Vector2(64, 3), new Vector2(65, 3), new Vector2(66, 3), };

        public Asteroid(Texture2D tex, Vector2 pos, Vector direction, double speed) : base(tex, pos)
        {
            this.speed = speed;
            this.direction = direction;
            //rotation = GameManager.RandomFloat(0, 50);
            //rotationspeed = GameManager.RandomFloat(0, 5);

            collider = new Collider(colliderpoints,
                 OnCollision,pos);

            shapedrawidx = Game1.game.batcher.AddMoveableShape(collider.points.ToArray(), Color.White, Vector2.Zero);
            Game1.game.batcher.shapes[shapedrawidx].Move(position);
        }
        public bool OnCollision()
        {
            return false;
        }
        public override void Draw()
        {
            Game1.game.spriteBatch.Draw(texture, position, null, Color.White, (float)rotation, origin, 1f, SpriteEffects.None, 1);
        }
        public void Update()
        {
            rotation += (rotationspeed * Game1.game.looptime);
            position = new Vector2 (position.X + (float)(speed*Game1.game.looptime*direction.i), position.Y + (float)(speed * Game1.game.looptime * direction.j));
            if (position.X < -100 || position.Y < -100 || position.X > (Game1.game.width + 100) || position.Y > (Game1.game.height+100))
            {
                disappear = true;
            }
            Game1.game.batcher.shapes[shapedrawidx].Move(position);
        }
    }
}
